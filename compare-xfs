#!/bin/bash


XFS_EXPRESSIONS=(
write_bw

# perf list | grep xfs: | awk '{print $1}'
xfs:xfs_attr_list_sf
xfs:xfs_attr_list_sf_all
xfs:xfs_attr_list_leaf
xfs:xfs_attr_list_leaf_end
xfs:xfs_attr_list_full
xfs:xfs_attr_list_add
xfs:xfs_attr_list_wrong_blk
xfs:xfs_attr_list_notfound
xfs:xfs_perag_get
xfs:xfs_perag_get_tag
xfs:xfs_perag_put
xfs:xfs_perag_set_reclaim
xfs:xfs_perag_clear_reclaim
xfs:xfs_attr_list_node_descend
xfs:xfs_iext_insert
xfs:xfs_iext_remove
xfs:xfs_bmap_pre_update
xfs:xfs_bmap_post_update
xfs:xfs_extlist
xfs:xfs_buf_init
xfs:xfs_buf_free
xfs:xfs_buf_hold
xfs:xfs_buf_rele
xfs:xfs_buf_iodone
xfs:xfs_buf_iorequest
xfs:xfs_buf_bawrite
xfs:xfs_buf_lock
xfs:xfs_buf_lock_done
xfs:xfs_buf_trylock
xfs:xfs_buf_unlock
xfs:xfs_buf_iowait
xfs:xfs_buf_iowait_done
xfs:xfs_buf_delwri_queue
xfs:xfs_buf_delwri_dequeue
xfs:xfs_buf_delwri_split
xfs:xfs_buf_get_uncached
xfs:xfs_bdstrat_shut
xfs:xfs_buf_item_relse
xfs:xfs_buf_item_iodone
xfs:xfs_buf_item_iodone_async
xfs:xfs_buf_error_relse
xfs:xfs_trans_read_buf_io
xfs:xfs_trans_read_buf_shut
xfs:xfs_btree_corrupt
xfs:xfs_da_btree_corrupt
xfs:xfs_reset_dqcounts
xfs:xfs_inode_item_push
xfs:xfs_buf_find
xfs:xfs_buf_get
xfs:xfs_buf_read
xfs:xfs_buf_ioerror
xfs:xfs_buf_item_size
xfs:xfs_buf_item_size_stale
xfs:xfs_buf_item_format
xfs:xfs_buf_item_format_stale
xfs:xfs_buf_item_pin
xfs:xfs_buf_item_unpin
xfs:xfs_buf_item_unpin_stale
xfs:xfs_buf_item_trylock
xfs:xfs_buf_item_unlock
xfs:xfs_buf_item_unlock_stale
xfs:xfs_buf_item_committed
xfs:xfs_buf_item_push
xfs:xfs_buf_item_pushbuf
xfs:xfs_trans_get_buf
xfs:xfs_trans_get_buf_recur
xfs:xfs_trans_getsb
xfs:xfs_trans_getsb_recur
xfs:xfs_trans_read_buf
xfs:xfs_trans_read_buf_recur
xfs:xfs_trans_log_buf
xfs:xfs_trans_brelse
xfs:xfs_trans_bjoin
xfs:xfs_trans_bhold
xfs:xfs_trans_bhold_release
xfs:xfs_trans_binval
xfs:xfs_ilock
xfs:xfs_ilock_nowait
xfs:xfs_ilock_demote
xfs:xfs_iunlock
xfs:xfs_iget_skip
xfs:xfs_iget_reclaim
xfs:xfs_iget_reclaim_fail
xfs:xfs_iget_hit
xfs:xfs_iget_miss
xfs:xfs_getattr
xfs:xfs_setattr
xfs:xfs_readlink
xfs:xfs_alloc_file_space
xfs:xfs_free_file_space
xfs:xfs_readdir
xfs:xfs_get_acl
xfs:xfs_vm_bmap
xfs:xfs_file_ioctl
xfs:xfs_file_compat_ioctl
xfs:xfs_ioctl_setattr
xfs:xfs_dir_fsync
xfs:xfs_file_fsync
xfs:xfs_destroy_inode
xfs:xfs_write_inode
xfs:xfs_evict_inode
xfs:xfs_dquot_dqalloc
xfs:xfs_dquot_dqdetach
xfs:xfs_ihold
xfs:xfs_irele
xfs:xfs_inode_pin
xfs:xfs_inode_unpin
xfs:xfs_inode_unpin_nowait
xfs:xfs_remove
xfs:xfs_link
xfs:xfs_lookup
xfs:xfs_create
xfs:xfs_symlink
xfs:xfs_rename
xfs:xfs_dqadjust
xfs:xfs_dqreclaim_want
xfs:xfs_dqreclaim_dirty
xfs:xfs_dqreclaim_unlink
xfs:xfs_dqattach_found
xfs:xfs_dqattach_get
xfs:xfs_dqinit
xfs:xfs_dqreuse
xfs:xfs_dqalloc
xfs:xfs_dqtobp_read
xfs:xfs_dqread
xfs:xfs_dqread_fail
xfs:xfs_dqlookup_found
xfs:xfs_dqlookup_want
xfs:xfs_dqlookup_freelist
xfs:xfs_dqlookup_done
xfs:xfs_dqget_hit
xfs:xfs_dqget_miss
xfs:xfs_dqput
xfs:xfs_dqput_wait
xfs:xfs_dqput_free
xfs:xfs_dqrele
xfs:xfs_dqflush
xfs:xfs_dqflush_force
xfs:xfs_dqflush_done
xfs:xfs_log_done_nonperm
xfs:xfs_log_done_perm
xfs:xfs_log_reserve
xfs:xfs_log_umount_write
xfs:xfs_log_grant_enter
xfs:xfs_log_grant_exit
xfs:xfs_log_grant_error
xfs:xfs_log_grant_sleep1
xfs:xfs_log_grant_wake1
xfs:xfs_log_grant_sleep2
xfs:xfs_log_grant_wake2
xfs:xfs_log_grant_wake_up
xfs:xfs_log_regrant_write_enter
xfs:xfs_log_regrant_write_exit
xfs:xfs_log_regrant_write_error
xfs:xfs_log_regrant_write_sleep1
xfs:xfs_log_regrant_write_wake1
xfs:xfs_log_regrant_write_sleep2
xfs:xfs_log_regrant_write_wake2
xfs:xfs_log_regrant_write_wake_up
xfs:xfs_log_regrant_reserve_enter
xfs:xfs_log_regrant_reserve_exit
xfs:xfs_log_regrant_reserve_sub
xfs:xfs_log_ungrant_enter
xfs:xfs_log_ungrant_exit
xfs:xfs_log_ungrant_sub
xfs:xfs_ail_push
xfs:xfs_ail_pushbuf
xfs:xfs_ail_pushbuf_pinned
xfs:xfs_ail_pinned
xfs:xfs_ail_locked
xfs:xfs_file_read
xfs:xfs_file_buffered_write
xfs:xfs_file_direct_write
xfs:xfs_file_splice_read
xfs:xfs_file_splice_write
xfs:xfs_writepage
xfs:xfs_releasepage
xfs:xfs_invalidatepage
xfs:xfs_map_blocks_found
xfs:xfs_map_blocks_alloc
xfs:xfs_get_blocks_found
xfs:xfs_get_blocks_alloc
xfs:xfs_delalloc_enospc
xfs:xfs_unwritten_convert
xfs:xfs_get_blocks_notfound
xfs:xfs_setfilesize
xfs:xfs_itruncate_data_start
xfs:xfs_itruncate_data_end
xfs:xfs_pagecache_inval
xfs:xfs_bunmap
xfs:xfs_alloc_busy
xfs:xfs_alloc_busy_enomem
xfs:xfs_alloc_busy_force
xfs:xfs_alloc_busy_reuse
xfs:xfs_alloc_busy_clear
xfs:xfs_alloc_busy_trim
xfs:xfs_trans_commit_lsn
xfs:xfs_agf
xfs:xfs_free_extent
xfs:xfs_alloc_exact_done
xfs:xfs_alloc_exact_notfound
xfs:xfs_alloc_exact_error
xfs:xfs_alloc_near_nominleft
xfs:xfs_alloc_near_first
xfs:xfs_alloc_near_greater
xfs:xfs_alloc_near_lesser
xfs:xfs_alloc_near_error
xfs:xfs_alloc_near_noentry
xfs:xfs_alloc_near_busy
xfs:xfs_alloc_size_neither
xfs:xfs_alloc_size_noentry
xfs:xfs_alloc_size_nominleft
xfs:xfs_alloc_size_done
xfs:xfs_alloc_size_error
xfs:xfs_alloc_size_busy
xfs:xfs_alloc_small_freelist
xfs:xfs_alloc_small_notenough
xfs:xfs_alloc_small_done
xfs:xfs_alloc_small_error
xfs:xfs_alloc_vextent_badargs
xfs:xfs_alloc_vextent_nofix
xfs:xfs_alloc_vextent_noagbp
xfs:xfs_alloc_vextent_loopfailed
xfs:xfs_alloc_vextent_allfailed
xfs:xfs_dir2_sf_addname
xfs:xfs_dir2_sf_create
xfs:xfs_dir2_sf_lookup
xfs:xfs_dir2_sf_replace
xfs:xfs_dir2_sf_removename
xfs:xfs_dir2_sf_toino4
xfs:xfs_dir2_sf_toino8
xfs:xfs_dir2_sf_to_block
xfs:xfs_dir2_block_addname
xfs:xfs_dir2_block_lookup
xfs:xfs_dir2_block_replace
xfs:xfs_dir2_block_removename
xfs:xfs_dir2_block_to_sf
xfs:xfs_dir2_block_to_leaf
xfs:xfs_dir2_leaf_addname
xfs:xfs_dir2_leaf_lookup
xfs:xfs_dir2_leaf_replace
xfs:xfs_dir2_leaf_removename
xfs:xfs_dir2_leaf_to_block
xfs:xfs_dir2_leaf_to_node
xfs:xfs_dir2_node_addname
xfs:xfs_dir2_node_lookup
xfs:xfs_dir2_node_replace
xfs:xfs_dir2_node_removename
xfs:xfs_dir2_node_to_leaf
xfs:xfs_dir2_leafn_add
xfs:xfs_dir2_leafn_remove
xfs:xfs_dir2_grow_inode
xfs:xfs_dir2_shrink_inode
xfs:xfs_dir2_leafn_moveents
xfs:xfs_swap_extent_before
xfs:xfs_swap_extent_after
xfs:xfs_log_recover_item_add
xfs:xfs_log_recover_item_add_cont
xfs:xfs_log_recover_item_reorder_head
xfs:xfs_log_recover_item_reorder_tail
xfs:xfs_log_recover_item_recover
xfs:xfs_log_recover_buf_not_cancel
xfs:xfs_log_recover_buf_cancel
xfs:xfs_log_recover_buf_cancel_add
xfs:xfs_log_recover_buf_cancel_ref_inc
xfs:xfs_log_recover_buf_recover
xfs:xfs_log_recover_buf_inode_buf
xfs:xfs_log_recover_buf_reg_buf
xfs:xfs_log_recover_buf_dquot_buf
xfs:xfs_log_recover_inode_recover
xfs:xfs_log_recover_inode_cancel
xfs:xfs_log_recover_inode_skip
xfs:xfs_discard_extent
xfs:xfs_discard_toosmall
xfs:xfs_discard_exclude
xfs:xfs_discard_busy

)

for e in ${XFS_EXPRESSIONS[*]}
do
	./compare -g xfs -e $e "$@"
	echo
done
